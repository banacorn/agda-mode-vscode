// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Vscode = require("vscode");
var Editor$AgdaModeVscode = require("../Editor.bs.js");

function toVSCodeDecorations(input, editor) {
  var backgroundColorDict = {};
  var foregroundColorDict = {};
  var addFaceToDict = function (face, range) {
    if (face.TAG === "Background") {
      var color = face._0;
      var ranges = backgroundColorDict[color];
      if (ranges !== undefined) {
        ranges.push(range);
      } else {
        backgroundColorDict[color] = [range];
      }
      return ;
    }
    var color$1 = face._0;
    var ranges$1 = foregroundColorDict[color$1];
    if (ranges$1 !== undefined) {
      ranges$1.push(range);
    } else {
      foregroundColorDict[color$1] = [range];
    }
  };
  input.forEach(function (param) {
        var range = param[1];
        var match = param[0];
        var theme = Vscode.window.activeColorTheme.kind;
        if (theme === 2) {
          return addFaceToDict(match.dark, range);
        } else {
          return addFaceToDict(match.light, range);
        }
      });
  var backgroundDecorations = Object.entries(backgroundColorDict).map(function (param) {
        var ranges = param[1];
        return [
                Editor$AgdaModeVscode.Decoration.highlightBackgroundWithColor(editor, param[0], ranges),
                ranges
              ];
      });
  var foregroundDecorations = Object.entries(foregroundColorDict).map(function (param) {
        var ranges = param[1];
        return [
                Editor$AgdaModeVscode.Decoration.decorateTextWithColor(editor, param[0], ranges),
                ranges
              ];
      });
  return foregroundDecorations.concat(backgroundDecorations);
}

exports.toVSCodeDecorations = toVSCodeDecorations;
/* vscode Not a pure module */
